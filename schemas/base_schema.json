{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": [
    "parametros_generador",
    "metodo_distribucion"
  ],
  "properties": {
    "parametros_generador": {
      "type": "object",
      "description": "parametros necesarios para el generador de numeros pseudoaleatorio",
      "required": [
        "nombre"
      ],
      "oneOf": [
        {
          "$ref": "generators/von_neumann.json"
        },
        {
          "$ref": "generators/fibonacci.json"
        },
        {
          "$ref": "generators/mixed_congruential.json"
        },
        {
          "$ref": "generators/additive_congruential.json"
        },
        {
          "$ref": "generators/multiplicative_congruential.json"
        }
      ]
    },
    "metodo_distribucion": {
      "type": "object",
      "required": [
        "tipo"
      ],
      "oneOf": [
        {
          "type": "object",
          "required": [
            "tipo",
            "tabla_contingencia"
          ],
          "properties": {
            "tipo": {
              "type": "string",
              "enum": [
                "tabla"
              ]
            },
            "tabla_contingencia": {
              "type": "object",
              "additionalProperties": {
                "type": "number"
              },
              "description": "Object where keys are string values and values are numbers"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "tipo",
            "n",
            "p"
          ],
          "properties": {
            "tipo": {
              "type": "string",
              "enum": [
                "binomial"
              ]
            },
            "n": {
              "type": "integer",
              "minimum": 1,
              "description": "Cantidad de intentos"
            },
            "p": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Probabilidad de éxito"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "tipo",
            "lambda"
          ],
          "properties": {
            "tipo": {
              "type": "string",
              "enum": [
                "poisson"
              ]
            },
            "lambda": {
              "type": "number",
              "minimum": 0,
              "description": "Cantidad promedio de eventos en el intervalo"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "tipo",
            "lambda"
          ],
          "properties": {
            "tipo": {
              "type": "string",
              "enum": [
                "exponencial"
              ]
            },
            "lambda": {
              "type": "number",
              "minimum": 0,
              "description": "Tasa de ocurrencia"
            },
            "discrete_step": {
              "type": "number",
              "minimum": 0,
              "description": "Paso de discretización (opcional)"
            },
            "discrete_min": {
              "type": "number",
              "description": "Valor mínimo para discretización (opcional)"
            },
            "discrete_max": {
              "type": "number",
              "description": "Valor máximo para discretización (opcional)"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "tipo",
            "mu",
            "sigma"
          ],
          "properties": {
            "tipo": {
              "type": "string",
              "enum": [
                "normal"
              ]
            },
            "mu": {
              "type": "number",
              "description": "Media de la distribución"
            },
            "sigma": {
              "type": "number",
              "minimum": 0,
              "description": "Desviación estándar"
            },
            "num_classes": {
              "type": "integer",
              "minimum": 1,
              "description": "Número de clases para discretización (opcional)"
            },
            "class_min": {
              "type": "number",
              "description": "Valor mínimo para las clases (opcional)"
            },
            "class_max": {
              "type": "number",
              "description": "Valor máximo para las clases (opcional)"
            }
          }
        }
      ]
    },
    "modelo_cola": {
      "type": "object",
      "required": [
        "tipo",
        "parametros"
      ],
      "properties": {
        "tipo": {
          "type": "string",
          "enum": [
            "MM1",
            "MM2",
            "MM1K"
          ],
          "description": "Tipo de modelo de cola"
        },
        "parametros": {
          "type": "object",
          "required": [
            "lambda_rate",
            "mu_rate"
          ],
          "properties": {
            "lambda_rate": {
              "type": "number",
              "minimum": 0,
              "description": "Tasa de llegada (clientes por unidad de tiempo)"
            },
            "mu_rate": {
              "type": "number",
              "minimum": 0,
              "description": "Tasa de servicio (clientes por unidad de tiempo)"
            },
            "K": {
              "type": "integer",
              "minimum": 1,
              "description": "Capacidad máxima del sistema (solo para MM1K)"
            }
          },
          "allOf": [
            {
              "if": {
                "properties": {
                  "tipo": {
                    "const": "MM1K"
                  }
                }
              },
              "then": {
                "required": [
                  "K"
                ]
              }
            }
          ]
        }
      }
    }
  }
}